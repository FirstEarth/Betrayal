<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Betrayal Character App</title>
    <style>
        body{
            user-select: none;
            -webkit-user-select: none;
            min-height: 100%;
        }
        div {
            flex: inherit;
            display: inherit;
            flex-direction: inherit;
            flex-wrap: inherit;
            justify-content: inherit;
            justify-items: inherit;
            align-content: inherit;
            align-items: inherit;
        }

        #placebox{
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: flex-start;
            justify-items: flex-start;
            align-items: center;
            align-content: flex-start;
            width: 100%;
            height: 86vh;
            border: 3px solid red;
        }
        .characterbox{
            flex-direction: column;
            border: 3px solid green;
            /*position: relative;*/
            height: 100%;
            min-height: 100%;
            justify-content: flex-start;
            backface-visibility: hidden;
        }
        .traitmeter{
            width: 95%;
            flex-direction:row;
            flex: 1;
            justify-content:space-around;

        }
        .default{
            color: green;
        }
        .traitvalue{
            border:2px solid blue;
        }
        .selected{
            border:3px solid green;
            border-radius: 4px;
        }
        .controlbar{
            width: 100%;
            flex-direction: row;
            justify-content: space-around;
            height: 9vh;
        }

        .hide{
            display: none;
        }

        .dead{
            position: absolute;
            background-color: darkslategrey;
            bottom: 0;
            width: 100%;
            height: 77vh;
            opacity: 0.4;
        }

        .switchedition{
            height: 10vh;
            position: absolute;
            bottom: 0;
            right: 0;
        }

        .card{
            position: relative;
            perspective: 100px;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        .cardfront, .cardback{
            width: 100%;
            position: relative;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }

        .cardback{
            transform: rotateY(180deg);
            top: -50%;
        }

        .flipped{
            transform: rotateY(180deg);
        }

    </style>
    <script>
        function changevalue(current) {
            let sibling = current.parentElement.firstElementChild;
            while (sibling) {
                if (sibling !== current) {
                    sibling.classList.remove("selected");
                } else {
                    sibling.classList.add("selected");
                    showkillscreen(current.parentElement.parentElement.parentElement.parentElement, sibling.innerText);
                }
                sibling = sibling.nextElementSibling;
            }
        }

        function changedown(clicked) {
            let finder = clicked.nextElementSibling;
            finder = finder.nextElementSibling;
            while (finder) {
                let testtext = finder.classList.toString();
                if (testtext.indexOf("selected") != -1) {
                    finder.classList.remove("selected");
                    finder = finder.previousElementSibling;
                    finder.classList.add("selected");
                    showkillscreen(clicked.parentElement.parentElement.parentElement.parentElement, finder.innerText)
                    break;
                } else {
                    finder = finder.nextElementSibling;
                }
            }
            
        }

        function showkillscreen(charfield , contenido) {
            if (contenido == "X") {
                charfield.lastElementChild.classList.remove("hide");
            }
        }

        function changeup(clicked) {
            let finder = clicked.previousElementSibling;
            finder = finder.previousElementSibling;
            while (finder) {
                let testtext = finder.classList.toString();
                if (testtext.indexOf("selected") != -1) {
                    finder.classList.remove("selected");
                    finder = finder.nextElementSibling;
                    finder.classList.add("selected");
                    break;
                } else {
                    finder = finder.previousElementSibling;
                }
            }
        }

        function resetchar(char) {
            let charhold = char.parentElement.nextElementSibling;
            let testtext = charhold.classList.toString();
            if (testtext.indexOf("hide") != -1) {
                charhold = charhold.nextElementSibling;
            }
            for (let i = 4; i < 12; i=i+2) {
                let finder1 = charhold.firstElementChild.children[i].firstElementChild;
                while (finder1) {
                    testtext = finder1.classList.toString();
                    if (testtext.indexOf("default") != -1) {
                        finder1.classList.add("selected");
                    } else {
                        finder1.classList.remove("selected");
                    }
                    finder1 = finder1.nextElementSibling;
                }
            }
            char.parentElement.parentElement.lastElementChild.classList.add("hide");
        }

        function switchchar(char) {
            let finder = char.parentElement.nextElementSibling;
            let testtext = finder.classList.toString();
                if (testtext.indexOf("flipped") != -1) {
                    finder.classList.remove("flipped");
                    finder.nextElementSibling.classList.add("flipped");
                } else {
                    finder.classList.add("flipped");
                    finder.nextElementSibling.classList.remove("flipped");
            }
        }
    </script>
</head>
<body>
    <div id="placebox">
        <div class="characterbox">
            <div class="controlbar">
                <div onclick="switchchar(this)">switch</div>
                <div onclick="resetchar(this)">reset</div>
            </div>
            <div class="card">
                <div id="greena" class="cardfront">
                    <img class="portrait" src="pics\greena.png" style="width:50%;" />
                    <div class="name">Peter Akimoto</div>
                    <div class="birthday">September 3</div>
                    <div class="traitlabel">Speed</div>
                    <div class="traitmeter">
                        <div class="traitvalue" onclick="changedown(this)">-</div>
                        <div class="traitvalue" onclick="changevalue(this)">X</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue default selected" onclick="changevalue(this)">4</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">7</div>
                        <div class="traitvalue" onclick="changevalue(this)">7</div>
                        <div class="traitvalue" onclick="changeup(this)">+</div>
                    </div>
                    <div class="traitlabel">Might</div>
                    <div class="traitmeter">
                        <div class="traitvalue" onclick="changedown(this)">-</div>
                        <div class="traitvalue" onclick="changevalue(this)">X</div>
                        <div class="traitvalue" onclick="changevalue(this)">2</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue default selected" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">4</div>
                        <div class="traitvalue" onclick="changevalue(this)">5</div>
                        <div class="traitvalue" onclick="changevalue(this)">5</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">8</div>
                        <div class="traitvalue" onclick="changeup(this)">+</div>
                    </div>
                    <div class="traitlabel">Knowledge</div>
                    <div class="traitmeter">
                        <div class="traitvalue" onclick="changedown(this)">-</div>
                        <div class="traitvalue" onclick="changevalue(this)">X</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">4</div>
                        <div class="traitvalue default selected" onclick="changevalue(this)">4</div>
                        <div class="traitvalue" onclick="changevalue(this)">5</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">7</div>
                        <div class="traitvalue" onclick="changevalue(this)">8</div>
                        <div class="traitvalue" onclick="changeup(this)">+</div>
                    </div>
                    <div class="traitlabel">Sanity</div>
                    <div class="traitmeter">
                        <div class="traitvalue" onclick="changedown(this)">-</div>
                        <div class="traitvalue" onclick="changevalue(this)">X</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">4</div>
                        <div class="traitvalue" onclick="changevalue(this)">4</div>
                        <div class="traitvalue default selected" onclick="changevalue(this)">4</div>
                        <div class="traitvalue" onclick="changevalue(this)">5</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">7</div>
                        <div class="traitvalue" onclick="changeup(this)">+</div>
                    </div>
                </div>
                <div id="greenb" class="cardback">
                    <img class="portrait" src="pics\greenb.png" style="width:50%;" />
                    <div class="name">Brandon Jaspers</div>
                    <div class="birthday">May 21</div>
                    <div class="traitlabel">Speed</div>
                    <div class="traitmeter">
                        <div class="traitvalue" onclick="changedown(this)">-</div>
                        <div class="traitvalue" onclick="changevalue(this)">X</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">4</div>
                        <div class="traitvalue" onclick="changevalue(this)">4</div>
                        <div class="traitvalue default selected" onclick="changevalue(this)">4</div>
                        <div class="traitvalue" onclick="changevalue(this)">5</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">7</div>
                        <div class="traitvalue" onclick="changevalue(this)">8</div>
                        <div class="traitvalue" onclick="changeup(this)">+</div>
                    </div>
                    <div class="traitlabel">Might</div>
                    <div class="traitmeter">
                        <div class="traitvalue" onclick="changedown(this)">-</div>
                        <div class="traitvalue" onclick="changevalue(this)">X</div>
                        <div class="traitvalue" onclick="changevalue(this)">2</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue default selected" onclick="changevalue(this)">4</div>
                        <div class="traitvalue" onclick="changevalue(this)">5</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">7</div>
                        <div class="traitvalue" onclick="changeup(this)">+</div>
                    </div>
                    <div class="traitlabel">Knowledge</div>
                    <div class="traitmeter">
                        <div class="traitvalue" onclick="changedown(this)">-</div>
                        <div class="traitvalue" onclick="changevalue(this)">X</div>
                        <div class="traitvalue" onclick="changevalue(this)">1</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue default selected" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">5</div>
                        <div class="traitvalue" onclick="changevalue(this)">5</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">7</div>
                        <div class="traitvalue" onclick="changeup(this)">+</div>
                    </div>
                    <div class="traitlabel">Sanity</div>
                    <div class="traitmeter">
                        <div class="traitvalue" onclick="changedown(this)">-</div>
                        <div class="traitvalue" onclick="changevalue(this)">X</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue" onclick="changevalue(this)">3</div>
                        <div class="traitvalue default selected" onclick="changevalue(this)">4</div>
                        <div class="traitvalue" onclick="changevalue(this)">5</div>
                        <div class="traitvalue" onclick="changevalue(this)">6</div>
                        <div class="traitvalue" onclick="changevalue(this)">7</div>
                        <div class="traitvalue" onclick="changevalue(this)">8</div>
                        <div class="traitvalue" onclick="changeup(this)">+</div>
                    </div>
                </div>
            </div>
            <div class="dead hide"></div>
        </div>
        <div class="characterbox">
            <div id="character2a">
                <img class="portrait" src="pics\2a.png" style="width:50%;" />
                <div class="name">Ox Bellows</div>
                <div class="birthday">September 3</div>
            </div>
            <div id="character2b"></div>
        </div>
        <div class="characterbox">
            <div id="character3a">
                <img class="portrait" src="pics\3a.png" style="width:50%;" />
                <div class="name">Jenny Leclerc</div>
                <div class="birthday">September 3</div>
            </div>
            <div id="character3b"></div>
        </div>
        <div class="characterbox">
            <div id="character4a">
                <img class="portrait" src="pics\4a.png" style="width:50%;" />
                <div class="name">Madame Zostra</div>
                <div class="birthday">September 3</div>
            </div>
            <div id="character4b"></div>
        </div>
        <div class="characterbox">
            <div id="character5a">
                <img class="portrait" src="pics\5a.png" style="width:50%;" />
                <div class="name">Missy Dubourde</div>
                <div class="birthday">September 3</div>
            </div>
            <div id="character5b"></div>
        </div>
        <div class="characterbox">
            <div id="character6a">
                <img class="portrait" src="pics\6a.png" style="width:50%;" />
                <div class="name">Professor Longfellow</div>
                <div class="birthday">September 3</div>
            </div>
            <div id="character6b"></div>
        </div>
    </div>
    <div class="switchedition">
        switch here
    </div>
</body>
</html>